<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ skill.skill_name }} - AI-Horizon Ed</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .main-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .hero-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 2rem;
            color: white;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        .urgency-badge {
            font-size: 0.9rem;
            font-weight: bold;
            padding: 0.4rem 1rem;
            border-radius: 25px;
        }
        
        .urgency-critical { background: #dc3545; color: white; }
        .urgency-rising { background: #fd7e14; color: white; }
        .urgency-emerging { background: #198754; color: white; }
        .urgency-stable { background: #6c757d; color: white; }
        
        .resource-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid #667eea;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .resource-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .quality-score {
            background: linear-gradient(135deg, #198754 0%, #20c997 100%);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }
        
        .summary-section {
            background: linear-gradient(135deg, #fff 0%, #f8f9ff 100%);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .importance-section {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .forecast-section {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .resource-type-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-bottom: 1rem;
        }
        
        .stat-badge {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 15px;
            margin-right: 1rem;
            display: inline-block;
        }
        
        .resource-meta {
            font-size: 0.9rem;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <nav class="navbar navbar-expand-lg main-header">
        <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-graduation-cap text-primary me-2"></i>
                <strong>AI-Horizon Ed</strong>
                <small class="text-muted ms-2">Educational Resource Curation</small>
            </a>
            <div class="navbar-nav ms-auto d-flex flex-row align-items-center">
                <a href="/" class="nav-link me-3">
                    <i class="fas fa-home me-1"></i> Dashboard
                </a>
                <a href="/skills" class="nav-link me-3">
                    <i class="fas fa-lightbulb me-1"></i> Learn More
                </a>
                <a href="/database" class="nav-link me-3" target="_blank">
                    <i class="fas fa-database me-1"></i> Browse Resources
                </a>
                <a href="/admin" class="nav-link me-3">
                    <i class="fas fa-cogs me-1"></i> Admin
                </a>
                <span class="badge bg-success ms-2">
                    <i class="fas fa-circle"></i> Active
                </span>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Hero Section -->
        <div class="hero-section">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-4 mb-3">
                        <i class="fas fa-lightbulb me-3"></i>{{ skill.skill_name }}
                    </h1>
                    <p class="lead">{{ skill.description }}</p>
                    <div class="d-flex flex-wrap align-items-center mt-4">
                        <span class="urgency-badge urgency-{{ skill.demand_trend }} me-3">
                            {{ skill.demand_trend.upper() }} DEMAND
                        </span>
                        <span class="stat-badge">
                            <i class="fas fa-chart-bar me-1"></i>
                            {{ (skill.urgency_score * 100) | round | int }}% Urgency
                        </span>
                        <span class="stat-badge">
                            <i class="fas fa-book me-1"></i>
                            {{ total_resources }} Resources
                        </span>
                        <span class="stat-badge">
                            <i class="fas fa-tag me-1"></i>
                            {{ ((skill.category or 'general') | string).replace('_', ' ').title() }}
                        </span>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="card bg-white bg-opacity-20 text-white">
                        <div class="card-body">
                            <h3>{{ (skill.urgency_score * 100) | round | int }}%</h3>
                            <p class="mb-0">Market Urgency Score</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8">
                {% if skill.skill_name == "Vibe Coding" %}
                <!-- Vibe Coding Specific Content -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>What is Vibe Coding?</h3>
                    <p class="lead">Vibe Coding is an emerging programming methodology that emphasizes mood, atmosphere, and intuitive coding practices to enhance developer productivity and creativity.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-brain me-2"></i>Core Principles</h5>
                            <ul>
                                <li><strong>AI-Assisted Flow:</strong> Seamless integration with AI tools like Cursor, GitHub Copilot, and ChatGPT</li>
                                <li><strong>Ambient Development:</strong> Creating the right environment and mood for coding</li>
                                <li><strong>Intuitive Programming:</strong> Focusing on natural, expressive code patterns</li>
                                <li><strong>Creative Enhancement:</strong> Using AI to amplify human creativity, not replace it</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-tools me-2"></i>Key Technologies</h5>
                            <ul>
                                <li><strong>Cursor AI:</strong> Context-aware code generation and editing</li>
                                <li><strong>GitHub Copilot:</strong> AI pair programming companion</li>
                                <li><strong>ChatGPT/Claude:</strong> Conversational coding assistance</li>
                                <li><strong>Bolt.new:</strong> AI-powered full-stack app generation</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Why is Vibe Coding Important?</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-rocket me-2"></i>Industry Impact</h5>
                            <p>As AI transforms software development, developers who master Vibe Coding will have significant advantages:</p>
                            <ul>
                                <li><strong>10x Productivity:</strong> AI-assisted development can dramatically speed up coding</li>
                                <li><strong>Reduced Cognitive Load:</strong> AI handles routine tasks, freeing mental resources for creativity</li>
                                <li><strong>Enhanced Problem Solving:</strong> AI partnership enables tackling more complex challenges</li>
                                <li><strong>Future-Proof Skills:</strong> Essential competency as AI coding tools become standard</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Market Demand</h5>
                            <p>Growing demand across multiple sectors:</p>
                            <ul>
                                <li><strong>Startups:</strong> Rapid prototyping and MVP development</li>
                                <li><strong>Tech Companies:</strong> Accelerated feature development</li>
                                <li><strong>Creative Industries:</strong> Interactive media and digital experiences</li>
                                <li><strong>Cybersecurity:</strong> Rapid tool development and automation</li>
                            </ul>
                            
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Skills Gap Alert:</strong> High demand with limited qualified practitioners creates significant career opportunities.
                            </div>
                        </div>
                    </div>
                </div>
                {% elif skill.skill_name == "Zero Trust Architecture" %}
                <!-- Zero Trust Architecture Specific Content -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>What is Zero Trust Architecture?</h3>
                    <p class="lead">Zero Trust Architecture is a security framework that requires all users, devices, and applications to be verified and authenticated before accessing any resources, regardless of their location.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-shield-alt me-2"></i>Core Principles</h5>
                            <ul>
                                <li><strong>Never Trust, Always Verify:</strong> Continuous authentication and authorization</li>
                                <li><strong>Least Privilege Access:</strong> Minimal access rights for users and systems</li>
                                <li><strong>Micro-segmentation:</strong> Granular network access controls</li>
                                <li><strong>Continuous Monitoring:</strong> Real-time security posture assessment</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-cogs me-2"></i>Key Technologies</h5>
                            <ul>
                                <li><strong>Identity & Access Management (IAM):</strong> Multi-factor authentication systems</li>
                                <li><strong>Software-Defined Perimeters (SDP):</strong> Dynamic security boundaries</li>
                                <li><strong>Privileged Access Management (PAM):</strong> Administrative access controls</li>
                                <li><strong>Network Segmentation:</strong> Isolated security zones</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Why is Zero Trust Critical?</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-rocket me-2"></i>Industry Impact</h5>
                            <ul>
                                <li><strong>Remote Work Security:</strong> Essential for distributed workforce protection</li>
                                <li><strong>Cloud Migration:</strong> Secure access to multi-cloud environments</li>
                                <li><strong>Breach Prevention:</strong> Reduces blast radius of security incidents</li>
                                <li><strong>Compliance Requirements:</strong> Meeting regulatory frameworks</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Market Demand</h5>
                            <ul>
                                <li><strong>Enterprise Security:</strong> Fortune 500 companies adopting zero trust</li>
                                <li><strong>Government Sector:</strong> Federal zero trust mandates</li>
                                <li><strong>Healthcare:</strong> HIPAA-compliant access controls</li>
                                <li><strong>Financial Services:</strong> Banking security transformations</li>
                            </ul>
                            
                            <div class="alert alert-warning mt-3">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>Executive Order:</strong> U.S. Federal agencies required to implement zero trust by 2024.
                            </div>
                        </div>
                    </div>
                </div>
                {% elif skill.skill_name == "AI-Enhanced SIEM" %}
                <!-- AI-Enhanced SIEM Specific Content -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>What is AI-Enhanced SIEM?</h3>
                    <p class="lead">AI-Enhanced Security Information and Event Management integrates artificial intelligence and machine learning capabilities into traditional SIEM platforms for advanced threat detection and response.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-brain me-2"></i>AI Capabilities</h5>
                            <ul>
                                <li><strong>Behavioral Analytics:</strong> User and entity behavior analysis (UEBA)</li>
                                <li><strong>Anomaly Detection:</strong> ML-powered pattern recognition</li>
                                <li><strong>Automated Correlation:</strong> Intelligent event correlation</li>
                                <li><strong>Predictive Analytics:</strong> Threat forecasting and risk assessment</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-tools me-2"></i>Key Platforms</h5>
                            <ul>
                                <li><strong>Splunk Phantom:</strong> Security orchestration and automation</li>
                                <li><strong>IBM QRadar:</strong> AI-powered threat detection</li>
                                <li><strong>Microsoft Sentinel:</strong> Cloud-native SIEM with AI</li>
                                <li><strong>Chronicle Security:</strong> Google's AI security analytics</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Why is AI-Enhanced SIEM Essential?</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-rocket me-2"></i>Industry Impact</h5>
                            <ul>
                                <li><strong>Alert Fatigue Reduction:</strong> 90% reduction in false positives</li>
                                <li><strong>Response Speed:</strong> Minutes instead of hours for threat detection</li>
                                <li><strong>Skills Gap Bridge:</strong> AI augments human analysts</li>
                                <li><strong>Advanced Threats:</strong> Detection of sophisticated attacks</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Market Demand</h5>
                            <ul>
                                <li><strong>SOC Modernization:</strong> Security operations transformation</li>
                                <li><strong>Threat Hunting:</strong> Proactive security investigations</li>
                                <li><strong>Incident Response:</strong> Automated response orchestration</li>
                                <li><strong>Compliance Automation:</strong> Regulatory reporting automation</li>
                            </ul>
                            
                            <div class="alert alert-info mt-3">
                                <i class="fas fa-info-circle me-2"></i>
                                <strong>Market Growth:</strong> AI-powered security market expected to reach $133.8B by 2030.
                            </div>
                        </div>
                    </div>
                </div>
                {% elif skill.skill_name == "Cloud Security Posture Management" %}
                <!-- Cloud Security Posture Management Specific Content -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>What is Cloud Security Posture Management (CSPM)?</h3>
                    <p class="lead">CSPM solutions provide continuous monitoring, assessment, and remediation of cloud infrastructure security configurations to ensure compliance and reduce risk.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-cloud me-2"></i>Core Functions</h5>
                            <ul>
                                <li><strong>Configuration Assessment:</strong> Continuous cloud security monitoring</li>
                                <li><strong>Compliance Validation:</strong> Automated regulatory compliance checks</li>
                                <li><strong>Risk Prioritization:</strong> Vulnerability scoring and remediation guidance</li>
                                <li><strong>Policy Enforcement:</strong> Automated security policy implementation</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-tools me-2"></i>Leading Platforms</h5>
                            <ul>
                                <li><strong>Prisma Cloud:</strong> Comprehensive cloud security platform</li>
                                <li><strong>AWS Security Hub:</strong> Native AWS security posture management</li>
                                <li><strong>Azure Security Center:</strong> Microsoft cloud security monitoring</li>
                                <li><strong>Lacework:</strong> Data-driven cloud security platform</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Why is CSPM Critical?</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-rocket me-2"></i>Industry Impact</h5>
                            <ul>
                                <li><strong>Cloud Migration Security:</strong> Safe cloud transformation</li>
                                <li><strong>Multi-Cloud Management:</strong> Unified security across providers</li>
                                <li><strong>DevSecOps Integration:</strong> Security in CI/CD pipelines</li>
                                <li><strong>Cost Optimization:</strong> Resource and security efficiency</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Market Demand</h5>
                            <ul>
                                <li><strong>Enterprise Cloud:</strong> 94% of enterprises use cloud services</li>
                                <li><strong>Security Misconfiguration:</strong> #1 cause of cloud breaches</li>
                                <li><strong>Regulatory Compliance:</strong> SOC 2, PCI DSS, GDPR requirements</li>
                                <li><strong>DevOps Security:</strong> Shift-left security practices</li>
                            </ul>
                            
                            <div class="alert alert-danger mt-3">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>Critical Stat:</strong> 73% of cloud breaches caused by misconfigurations.
                            </div>
                        </div>
                    </div>
                </div>
                {% elif skill.skill_name == "AI Tools for Penetration Testing and Red Teaming" %}
                <!-- AI Pentesting Tools Specific Content -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>What are AI Tools for Penetration Testing?</h3>
                    <p class="lead">AI-powered penetration testing tools leverage machine learning and natural language processing to automate vulnerability discovery, exploit development, and security assessment processes.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-robot me-2"></i>AI Capabilities</h5>
                            <ul>
                                <li><strong>Automated Reconnaissance:</strong> AI-driven information gathering</li>
                                <li><strong>Vulnerability Assessment:</strong> ML-powered weakness identification</li>
                                <li><strong>Exploit Generation:</strong> Automated exploit development</li>
                                <li><strong>Report Generation:</strong> AI-powered penetration test reports</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-tools me-2"></i>Key AI Tools</h5>
                            <ul>
                                <li><strong>PentestGPT:</strong> LLM-powered penetration testing assistant</li>
                                <li><strong>AutoPentester:</strong> Automated vulnerability scanning</li>
                                <li><strong>DeepExploit:</strong> AI-based exploit framework</li>
                                <li><strong>GPT-based Tools:</strong> Custom ChatGPT/Claude integrations</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Why are AI Pentesting Tools Revolutionary?</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-rocket me-2"></i>Industry Impact</h5>
                            <ul>
                                <li><strong>Speed Enhancement:</strong> 10x faster vulnerability discovery</li>
                                <li><strong>Skill Democratization:</strong> Lower barrier to entry for pentesting</li>
                                <li><strong>Comprehensive Coverage:</strong> AI explores attack vectors humans miss</li>
                                <li><strong>Continuous Testing:</strong> Automated recurring assessments</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Market Demand</h5>
                            <ul>
                                <li><strong>Red Team Operations:</strong> Advanced persistent threat simulation</li>
                                <li><strong>Bug Bounty Programs:</strong> Automated vulnerability research</li>
                                <li><strong>Security Consulting:</strong> Enhanced penetration testing services</li>
                                <li><strong>Internal Security:</strong> Continuous security validation</li>
                            </ul>
                            
                            <div class="alert alert-success mt-3">
                                <i class="fas fa-lightbulb me-2"></i>
                                <strong>Emerging Field:</strong> High demand with few qualified practitioners - perfect for early adopters.
                            </div>
                        </div>
                    </div>
                </div>
                {% elif skill.skill_name == "Quantum-Safe Cryptography" %}
                <!-- Quantum-Safe Cryptography Specific Content -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>What is Quantum-Safe Cryptography?</h3>
                    <p class="lead">Quantum-safe cryptography (also known as post-quantum cryptography) refers to cryptographic algorithms that are secure against both quantum and classical computers, protecting against future quantum computing threats.</p>
                    
                    <div class="row mt-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-atom me-2"></i>Core Concepts</h5>
                            <ul>
                                <li><strong>Lattice-Based Cryptography:</strong> Mathematical lattice problem foundations</li>
                                <li><strong>Hash-Based Signatures:</strong> One-way hash function security</li>
                                <li><strong>Code-Based Cryptography:</strong> Error-correcting code algorithms</li>
                                <li><strong>Isogeny-Based Cryptography:</strong> Elliptic curve isogeny mathematics</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-shield-alt me-2"></i>NIST Standards</h5>
                            <ul>
                                <li><strong>CRYSTALS-Kyber:</strong> Key encapsulation mechanism</li>
                                <li><strong>CRYSTALS-Dilithium:</strong> Digital signature algorithm</li>
                                <li><strong>FALCON:</strong> Fast Fourier lattice-based signatures</li>
                                <li><strong>SPHINCS+:</strong> Stateless hash-based signatures</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="importance-section">
                    <h3><i class="fas fa-exclamation-triangle me-2 text-warning"></i>Why is Quantum-Safe Cryptography Urgent?</h3>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="fas fa-rocket me-2"></i>Industry Impact</h5>
                            <ul>
                                <li><strong>Quantum Threat Timeline:</strong> Cryptographically relevant quantum computers expected by 2030</li>
                                <li><strong>Infrastructure Protection:</strong> Safeguarding current encrypted data</li>
                                <li><strong>Migration Planning:</strong> 10+ year transition timeline</li>
                                <li><strong>Regulatory Compliance:</strong> Government mandates for quantum readiness</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-chart-line me-2"></i>Market Demand</h5>
                            <ul>
                                <li><strong>Financial Services:</strong> Banking and payment system security</li>
                                <li><strong>Government Sector:</strong> National security infrastructure</li>
                                <li><strong>Healthcare:</strong> Patient data protection</li>
                                <li><strong>Critical Infrastructure:</strong> Power grid and transportation security</li>
                            </ul>
                            
                            <div class="alert alert-danger mt-3">
                                <i class="fas fa-clock me-2"></i>
                                <strong>Urgent Timeline:</strong> "Harvest now, decrypt later" attacks already occurring.
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <!-- Generic summary for other skills -->
                <div class="summary-section">
                    <h3><i class="fas fa-info-circle me-2 text-primary"></i>About {{ skill.skill_name }}</h3>
                    <p class="lead">{{ skill.description }}</p>
                    
                    <div class="alert alert-info">
                        <i class="fas fa-construction me-2"></i>
                        <strong>Detailed Analysis Coming Soon:</strong> We're developing comprehensive analysis for this emerging skill based on our workforce intelligence research.
                    </div>
                </div>
                {% endif %}

                <!-- Forecast Intelligence Section -->
                <div class="forecast-section">
                    <h3><i class="fas fa-crystal-ball me-2 text-info"></i>AI-Horizon Workforce Intelligence</h3>
                    <div class="row">
                        <div class="col-md-8">
                            <p>Based on our analysis of industry trends, job market data, and technology adoption patterns:</p>
                            <ul>
                                <li><strong>Source Analysis:</strong> {{ ((skill.source_analysis or 'manual_curation') | string).replace('_', ' ').title() }}</li>
                                <li><strong>Demand Trend:</strong> {{ skill.demand_trend.title() }} trajectory in job postings</li>
                                <li><strong>Market Priority:</strong> {{ (skill.urgency_score * 100) | round | int }}% urgency score based on supply/demand gap</li>
                            </ul>
                        </div>
                        <div class="col-md-4">
                            <div class="alert alert-warning">
                                <i class="fas fa-chart-line me-2"></i>
                                <strong>Coming Soon:</strong> Detailed citations and forecasts from the main AI-Horizon platform will be integrated here.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Resources Section -->
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">
                            <i class="fas fa-book-open me-2"></i>
                            Curated Learning Resources ({{ total_resources }})
                        </h4>
                    </div>
                    <div class="card-body">
                        {% if resources %}
                            <!-- Cost-based organization (Free vs Paid) -->
                            {% if resources.free or resources.paid %}
                            <div class="row mb-4">
                                {% if resources.free %}
                                <div class="col-lg-6">
                                    <div class="resource-type-section mb-4">
                                        <div class="resource-type-header" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                                            <h5 class="mb-0">
                                                <i class="fas fa-gift me-2"></i>
                                                Free Resources ({{ resources.free | length }})
                                            </h5>
                                        </div>
                                        
                                        {% for resource in resources.free %}
                                        <div class="resource-card">
                                            <div class="d-flex justify-content-between align-items-start mb-3">
                                                <h6 class="mb-0">
                                                    <a href="{{ resource.url }}" target="_blank" class="text-decoration-none text-dark">
                                                        {{ resource.title }}
                                                    </a>
                                                </h6>
                                                <div class="d-flex gap-2">
                                                    <span class="badge bg-success">Free</span>
                                                    {% if resource.difficulty_level %}
                                                    <span class="badge bg-info">{{ resource.difficulty_level.title() }}</span>
                                                    {% endif %}
                                                    <span class="quality-score" style="font-size: 0.75rem; padding: 0.2rem 0.5rem;">
                                                        {{ (resource.quality_score * 100) | round | int }}%
                                                    </span>
                                                </div>
                                            </div>
                                            
                                            <p class="text-muted mb-3">{{ resource.description }}</p>
                                            
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="resource-meta">
                                                    <i class="fas fa-external-link-alt me-1"></i>
                                                    {{ resource.source_platform or 'External' }}
                                                    {% if resource.author %}
                                                        • <i class="fas fa-user me-1"></i>{{ resource.author }}
                                                    {% endif %}
                                                    {% if resource.duration_minutes %}
                                                        • <i class="fas fa-clock me-1"></i>{{ resource.duration_minutes }}min
                                                    {% endif %}
                                                </div>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-outline-primary btn-sm quiz-btn" 
                                                            data-resource-id="{{ resource.id }}" 
                                                            data-resource-title="{{ resource.title }}">
                                                        <i class="fas fa-question-circle me-1"></i>Quiz
                                                    </button>
                                                    <a href="{{ resource.url }}" target="_blank" class="btn btn-outline-success btn-sm">
                                                        <i class="fas fa-external-link-alt me-1"></i>Start Free
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}

                                {% if resources.paid %}
                                <div class="col-lg-6">
                                    <div class="resource-type-section mb-4">
                                        <div class="resource-type-header" style="background: linear-gradient(135deg, #ffc107 0%, #fd7e14 100%);">
                                            <h5 class="mb-0">
                                                <i class="fas fa-star me-2"></i>
                                                Premium Resources ({{ resources.paid | length }})
                                            </h5>
                                        </div>
                                        
                                        {% for resource in resources.paid %}
                                        <div class="resource-card">
                                            <div class="d-flex justify-content-between align-items-start mb-3">
                                                <h6 class="mb-0">
                                                    <a href="{{ resource.url }}" target="_blank" class="text-decoration-none text-dark">
                                                        {{ resource.title }}
                                                    </a>
                                                </h6>
                                                <div class="d-flex gap-2">
                                                    <span class="badge bg-warning text-dark">{{ resource.cost_type.title() if resource.cost_type else 'Paid' }}</span>
                                                    {% if resource.difficulty_level %}
                                                    <span class="badge bg-info">{{ resource.difficulty_level.title() }}</span>
                                                    {% endif %}
                                                    <span class="quality-score" style="font-size: 0.75rem; padding: 0.2rem 0.5rem;">
                                                        {{ (resource.quality_score * 100) | round | int }}%
                                                    </span>
                                                </div>
                                            </div>
                                            
                                            <p class="text-muted mb-3">{{ resource.description }}</p>
                                            
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="resource-meta">
                                                    <i class="fas fa-external-link-alt me-1"></i>
                                                    {{ resource.source_platform or 'External' }}
                                                    {% if resource.author %}
                                                        • <i class="fas fa-user me-1"></i>{{ resource.author }}
                                                    {% endif %}
                                                    {% if resource.duration_minutes %}
                                                        • <i class="fas fa-clock me-1"></i>{{ resource.duration_minutes }}min
                                                    {% endif %}
                                                </div>
                                                <div class="d-flex gap-2">
                                                    <button class="btn btn-outline-primary btn-sm quiz-btn" 
                                                            data-resource-id="{{ resource.id }}" 
                                                            data-resource-title="{{ resource.title }}">
                                                        <i class="fas fa-question-circle me-1"></i>Quiz
                                                    </button>
                                                    <a href="{{ resource.url }}" target="_blank" class="btn btn-outline-warning btn-sm">
                                                        <i class="fas fa-external-link-alt me-1"></i>View Premium
                                                    </a>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            {% endif %}

                            <!-- Difficulty-based organization -->
                            {% if resources.beginner or resources.intermediate or resources.advanced %}
                            <div class="mb-4">
                                <h4 class="mb-3"><i class="fas fa-layer-group me-2"></i>By Difficulty Level</h4>
                                
                                {% if resources.beginner %}
                                <div class="resource-type-section mb-4">
                                    <div class="resource-type-header" style="background: linear-gradient(135deg, #17a2b8 0%, #6610f2 100%);">
                                        <h5 class="mb-0">
                                            <i class="fas fa-seedling me-2"></i>
                                            Beginner Level ({{ resources.beginner | length }})
                                        </h5>
                                    </div>
                                    
                                    <div class="row">
                                        {% for resource in resources.beginner %}
                                        <div class="col-md-6">
                                            <div class="resource-card">
                                                <div class="d-flex justify-content-between align-items-start mb-3">
                                                    <h6 class="mb-0">
                                                        <a href="{{ resource.url }}" target="_blank" class="text-decoration-none text-dark">
                                                            {{ resource.title }}
                                                        </a>
                                                    </h6>
                                                    <div class="d-flex gap-2">
                                                        <span class="badge bg-info">Beginner</span>
                                                        {% if resource.cost_type == 'free' %}
                                                        <span class="badge bg-success">Free</span>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                
                                                <p class="text-muted mb-3" style="font-size: 0.9rem;">{{ resource.description[:100] }}...</p>
                                                
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="resource-meta">
                                                        <i class="fas fa-external-link-alt me-1"></i>
                                                        {{ resource.source_platform or 'External' }}
                                                        {% if resource.duration_minutes %}
                                                            • {{ resource.duration_minutes }}min
                                                        {% endif %}
                                                    </div>
                                                    <div class="d-flex gap-2">
                                                        <button class="btn btn-outline-primary btn-sm quiz-btn" 
                                                                data-resource-id="{{ resource.id }}" 
                                                                data-resource-title="{{ resource.title }}">
                                                            <i class="fas fa-question-circle me-1"></i>Quiz
                                                        </button>
                                                        <a href="{{ resource.url }}" target="_blank" class="btn btn-outline-info btn-sm">
                                                            <i class="fas fa-play me-1"></i>Start
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}

                                {% if resources.intermediate %}
                                <div class="resource-type-section mb-4">
                                    <div class="resource-type-header" style="background: linear-gradient(135deg, #fd7e14 0%, #e83e8c 100%);">
                                        <h5 class="mb-0">
                                            <i class="fas fa-chart-line me-2"></i>
                                            Intermediate Level ({{ resources.intermediate | length }})
                                        </h5>
                                    </div>
                                    
                                    <div class="row">
                                        {% for resource in resources.intermediate %}
                                        <div class="col-md-6">
                                            <div class="resource-card">
                                                <div class="d-flex justify-content-between align-items-start mb-3">
                                                    <h6 class="mb-0">
                                                        <a href="{{ resource.url }}" target="_blank" class="text-decoration-none text-dark">
                                                            {{ resource.title }}
                                                        </a>
                                                    </h6>
                                                    <div class="d-flex gap-2">
                                                        <span class="badge bg-warning text-dark">Intermediate</span>
                                                        {% if resource.cost_type == 'free' %}
                                                        <span class="badge bg-success">Free</span>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                
                                                <p class="text-muted mb-3" style="font-size: 0.9rem;">{{ resource.description[:100] }}...</p>
                                                
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="resource-meta">
                                                        <i class="fas fa-external-link-alt me-1"></i>
                                                        {{ resource.source_platform or 'External' }}
                                                        {% if resource.duration_minutes %}
                                                            • {{ resource.duration_minutes }}min
                                                        {% endif %}
                                                    </div>
                                                    <div class="d-flex gap-2">
                                                        <button class="btn btn-outline-primary btn-sm quiz-btn" 
                                                                data-resource-id="{{ resource.id }}" 
                                                                data-resource-title="{{ resource.title }}">
                                                            <i class="fas fa-question-circle me-1"></i>Quiz
                                                        </button>
                                                        <a href="{{ resource.url }}" target="_blank" class="btn btn-outline-warning btn-sm">
                                                            <i class="fas fa-play me-1"></i>Continue
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}

                                {% if resources.advanced %}
                                <div class="resource-type-section mb-4">
                                    <div class="resource-type-header" style="background: linear-gradient(135deg, #dc3545 0%, #6f42c1 100%);">
                                        <h5 class="mb-0">
                                            <i class="fas fa-graduation-cap me-2"></i>
                                            Advanced Level ({{ resources.advanced | length }})
                                        </h5>
                                    </div>
                                    
                                    <div class="row">
                                        {% for resource in resources.advanced %}
                                        <div class="col-md-6">
                                            <div class="resource-card">
                                                <div class="d-flex justify-content-between align-items-start mb-3">
                                                    <h6 class="mb-0">
                                                        <a href="{{ resource.url }}" target="_blank" class="text-decoration-none text-dark">
                                                            {{ resource.title }}
                                                        </a>
                                                    </h6>
                                                    <div class="d-flex gap-2">
                                                        <span class="badge bg-danger">Advanced</span>
                                                        {% if resource.cost_type == 'free' %}
                                                        <span class="badge bg-success">Free</span>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                
                                                <p class="text-muted mb-3" style="font-size: 0.9rem;">{{ resource.description[:100] }}...</p>
                                                
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <div class="resource-meta">
                                                        <i class="fas fa-external-link-alt me-1"></i>
                                                        {{ resource.source_platform or 'External' }}
                                                        {% if resource.duration_minutes %}
                                                            • {{ resource.duration_minutes }}min
                                                        {% endif %}
                                                    </div>
                                                    <div class="d-flex gap-2">
                                                        <button class="btn btn-outline-primary btn-sm quiz-btn" 
                                                                data-resource-id="{{ resource.id }}" 
                                                                data-resource-title="{{ resource.title }}">
                                                            <i class="fas fa-question-circle me-1"></i>Quiz
                                                        </button>
                                                        <a href="{{ resource.url }}" target="_blank" class="btn btn-outline-danger btn-sm">
                                                            <i class="fas fa-rocket me-1"></i>Master
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                {% endif %}
                            </div>
                            {% endif %}

                            <!-- Fallback: Show all resources if no categorization -->
                            {% if not (resources.free or resources.paid or resources.beginner or resources.intermediate or resources.advanced) %}
                            {% for resource_type, resource_list in resources.items() %}
                            <div class="resource-type-section mb-4">
                                <div class="resource-type-header">
                                    <h5 class="mb-0">
                                        <i class="fas fa-{% if resource_type == 'videos' %}play{% elif resource_type == 'courses' %}graduation-cap{% elif resource_type == 'documentation' %}file-alt{% else %}link{% endif %} me-2"></i>
                                        {{ ((resource_type or 'resources') | string).replace('_', ' ').title() }} ({{ resource_list | length }})
                                    </h5>
                                </div>
                                
                                {% for resource in resource_list %}
                                <div class="resource-card">
                                    <div class="d-flex justify-content-between align-items-start mb-3">
                                        <h6 class="mb-0">
                                            <a href="{{ resource.url }}" target="_blank" class="text-decoration-none text-dark">
                                                {{ resource.title }}
                                            </a>
                                        </h6>
                                        <span class="quality-score">
                                            {{ (resource.quality_score * 100) | round | int }}% Quality
                                        </span>
                                    </div>
                                    
                                    <p class="text-muted mb-3">{{ resource.description }}</p>
                                    
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div class="resource-meta">
                                            <i class="fas fa-external-link-alt me-1"></i>
                                            {{ resource.source_platform or 'External' }}
                                            {% if resource.author %}
                                                • <i class="fas fa-user me-1"></i>{{ resource.author }}
                                            {% endif %}
                                            {% if resource.duration_minutes %}
                                                • <i class="fas fa-clock me-1"></i>{{ resource.duration_minutes }}min
                                            {% endif %}
                                        </div>
                                        <div class="d-flex gap-2">
                                            <button class="btn btn-outline-primary btn-sm quiz-btn" 
                                                    data-resource-id="{{ resource.id }}" 
                                                    data-resource-title="{{ resource.title }}">
                                                <i class="fas fa-question-circle me-1"></i>Quiz
                                            </button>
                                            <a href="{{ resource.url }}" target="_blank" class="btn btn-outline-primary btn-sm">
                                                <i class="fas fa-external-link-alt me-1"></i>Open Resource
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                            {% endfor %}
                            {% endif %}
                        {% else %}
                            <div class="text-center text-muted p-4">
                                <i class="fas fa-search fa-3x mb-3"></i>
                                <h5>No Resources Found</h5>
                                <p>Resources for this skill haven't been discovered yet.</p>
                                {% if is_authenticated %}
                                <a href="/" class="btn btn-primary">
                                    <i class="fas fa-search me-1"></i>Discover Resources
                                </a>
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Sidebar -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-lightbulb me-2"></i>
                            Related Skills
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="text-muted">AI-Assisted Development, Creative Programming, Developer Experience</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-bar me-2"></i>
                            Skill Metrics
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label class="form-label">Urgency Score</label>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: {{ (skill.urgency_score * 100) | round | int }}%">
                                    {{ (skill.urgency_score * 100) | round | int }}%
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Resource Availability</label>
                            <div class="progress">
                                <div class="progress-bar bg-success" role="progressbar" style="width: {{ ((total_resources / 20) * 100) | round | int if total_resources < 20 else 100 }}%">
                                    {{ total_resources }} found
                                </div>
                            </div>
                        </div>

                        <div class="d-grid gap-2">
                            {% if is_authenticated %}
                            <a href="/" class="btn btn-primary">
                                <i class="fas fa-search me-1"></i>Discover More Resources
                            </a>
                            {% endif %}
                            <a href="/database" class="btn btn-outline-secondary" target="_blank">
                                <i class="fas fa-database me-1"></i>Browse All Resources
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div class="modal fade" id="quizModal" tabindex="-1" aria-labelledby="quizModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quizModalLabel">
                        <i class="fas fa-question-circle me-2"></i>Quiz
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="quizContent">
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2">Loading quiz questions...</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="submitQuiz" style="display: none;">Submit Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Quiz functionality
            const quizButtons = document.querySelectorAll('.quiz-btn');
            const quizModal = new bootstrap.Modal(document.getElementById('quizModal'));
            
            // Check quiz availability for all resources
            checkQuizAvailability();
            
            // Add click handlers for quiz buttons
            quizButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const resourceId = this.getAttribute('data-resource-id');
                    const resourceTitle = this.getAttribute('data-resource-title');
                    
                    if (this.classList.contains('disabled')) {
                        return false;
                    }
                    
                    loadQuiz(resourceId, resourceTitle);
                });
            });
            
            async function checkQuizAvailability() {
                for (const button of quizButtons) {
                    const resourceId = button.getAttribute('data-resource-id');
                    
                    try {
                        const response = await fetch(`/api/resource/${resourceId}/questions`);
                        if (response.ok) {
                            button.classList.remove('btn-outline-primary');
                            button.classList.add('btn-primary');
                            button.innerHTML = '<i class="fas fa-question-circle me-1"></i>Take Quiz';
                        } else {
                            button.classList.add('disabled');
                            button.style.opacity = '0.5';
                            button.innerHTML = '<i class="fas fa-clock me-1"></i>Coming Soon';
                        }
                    } catch (error) {
                        button.classList.add('disabled');
                        button.style.opacity = '0.5';
                        button.innerHTML = '<i class="fas fa-clock me-1"></i>Coming Soon';
                    }
                }
            }
            
            async function loadQuiz(resourceId, resourceTitle) {
                document.getElementById('quizModalLabel').innerHTML = 
                    `<i class="fas fa-question-circle me-2"></i>Quiz: ${resourceTitle}`;
                
                const quizContent = document.getElementById('quizContent');
                quizContent.innerHTML = `
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p class="mt-2">Loading quiz questions...</p>
                    </div>
                `;
                
                quizModal.show();
                
                try {
                    const response = await fetch(`/api/resource/${resourceId}/questions`);
                    if (!response.ok) {
                        throw new Error('Questions not available');
                    }
                    
                    const questions = await response.json();
                    displayQuiz(questions, resourceId);
                } catch (error) {
                    quizContent.innerHTML = `
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Quiz Not Available Yet</strong><br>
                            Questions for this resource are still being generated. Please check back later!
                        </div>
                    `;
                }
            }
            
            function displayQuiz(questionsData, resourceId) {
                const quizContent = document.getElementById('quizContent');
                let html = '';
                
                // Extract questions array from the response
                const questions = questionsData.questions || questionsData;
                
                questions.forEach((question, index) => {
                    const questionText = question.question_text || question.question;
                    
                    html += `
                        <div class="question-card mb-4">
                            <h6><strong>Question ${index + 1}:</strong> ${questionText}</h6>
                            <div class="options mt-3">
                    `;
                    
                    // Handle different question types
                    if (question.question_type === 'open_ended') {
                        // For open-ended questions, show as text input
                        html += `
                            <div class="mb-3">
                                <textarea class="form-control" 
                                          name="question_${index}" 
                                          id="q${index}_answer" 
                                          rows="3" 
                                          placeholder="Enter your answer here..."></textarea>
                            </div>
                        `;
                    } else if (question.options && question.options.length > 0) {
                        // For multiple choice questions
                        question.options.forEach((option, optionIndex) => {
                            html += `
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" 
                                           name="question_${index}" value="${optionIndex}" 
                                           id="q${index}_opt${optionIndex}">
                                    <label class="form-check-label" for="q${index}_opt${optionIndex}">
                                        ${option}
                                    </label>
                                </div>
                            `;
                        });
                    } else {
                        // Fallback for questions without options
                        html += `
                            <div class="mb-3">
                                <input type="text" class="form-control" 
                                       name="question_${index}" 
                                       id="q${index}_answer" 
                                       placeholder="Enter your answer here...">
                            </div>
                        `;
                    }
                    
                    html += `
                            </div>
                        </div>
                        <hr>
                    `;
                });
                
                quizContent.innerHTML = html;
                document.getElementById('submitQuiz').style.display = 'block';
                
                // Handle quiz submission
                document.getElementById('submitQuiz').onclick = function() {
                    submitQuiz(questions, resourceId);
                };
            }
            
            async function submitQuiz(questions, resourceId) {
                const answers = [];
                let allAnswered = true;
                
                questions.forEach((question, index) => {
                    if (question.question_type === 'open_ended') {
                        // For open-ended questions, get text input
                        const textAnswer = document.getElementById(`q${index}_answer`);
                        if (textAnswer && textAnswer.value.trim()) {
                            answers.push(textAnswer.value.trim());
                        } else {
                            allAnswered = false;
                        }
                    } else {
                        // For multiple choice questions
                        const selectedOption = document.querySelector(`input[name="question_${index}"]:checked`);
                        if (selectedOption) {
                            answers.push(parseInt(selectedOption.value));
                        } else {
                            allAnswered = false;
                        }
                    }
                });
                
                if (!allAnswered) {
                    alert('Please answer all questions before submitting.');
                    return;
                }
                
                // Show grading in progress
                const quizContent = document.getElementById('quizContent');
                quizContent.innerHTML = `
                    <div class="text-center">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Grading...</span>
                        </div>
                        <p class="mt-2">AI is grading your answers...</p>
                        <small class="text-muted">This may take a few seconds for detailed feedback</small>
                    </div>
                `;
                
                document.getElementById('submitQuiz').style.display = 'none';
                
                try {
                    // Submit to AI grading endpoint
                    const response = await fetch(`/api/quiz/${resourceId}/grade`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            answers: answers
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        
                        if (result.ai_graded && result.grading_results) {
                            // Display AI grading results
                            displayAIGradingResults(result.grading_results, questions, answers);
                        } else {
                            // Fallback to basic grading display
                            displayBasicResults(questions, answers);
                        }
                    } else {
                        throw new Error('Grading failed');
                    }
                } catch (error) {
                    console.error('AI grading failed, using basic grading:', error);
                    // Fallback to basic grading
                    displayBasicResults(questions, answers);
                }
            }
            
            function displayAIGradingResults(gradingResults, questions, answers) {
                const quizContent = document.getElementById('quizContent');
                const score = gradingResults.overall_score || 0;
                const passingGrade = score >= 70;
                
                let resultHtml = `
                    <div class="text-center mb-4">
                        <div class="alert alert-${passingGrade ? 'success' : 'warning'}">
                            <h4><i class="fas fa-${passingGrade ? 'check-circle' : 'exclamation-triangle'} me-2"></i>
                            AI-Graded Quiz Complete!</h4>
                            <h2>${score}% ${gradingResults.grade_letter || ''}</h2>
                            <p>${gradingResults.overall_feedback || 'Quiz completed successfully.'}</p>
                            ${passingGrade ? 
                                '<p><strong>Excellent work!</strong> You demonstrate solid understanding.</p>' : 
                                '<p><strong>Keep studying!</strong> Review the detailed feedback below.</p>'
                            }
                        </div>
                    </div>
                `;
                
                // Display detailed feedback for each question
                if (gradingResults.questions_evaluated) {
                    resultHtml += '<div class="detailed-feedback">';
                    gradingResults.questions_evaluated.forEach((evaluation) => {
                        const scoreColor = evaluation.score >= 80 ? 'success' : 
                                          evaluation.score >= 60 ? 'warning' : 'danger';
                        
                        resultHtml += `
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <h6 class="mb-0"><strong>Question ${evaluation.question_number}</strong></h6>
                                        <span class="badge bg-${scoreColor}">${evaluation.score}/100</span>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <strong>Your Answer:</strong>
                                        <div class="bg-light p-2 rounded mt-1">${evaluation.student_answer}</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <strong>Model Answer:</strong>
                                        <div class="bg-light p-2 rounded mt-1">${evaluation.correct_answer}</div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <strong>Detailed Feedback:</strong>
                                        <p class="mt-1">${evaluation.feedback}</p>
                                    </div>
                                    
                                    ${evaluation.strengths && evaluation.strengths.length > 0 ? `
                                        <div class="mb-2">
                                            <strong class="text-success">Strengths:</strong>
                                            <ul class="mb-0">
                                                ${evaluation.strengths.map(strength => `<li>${strength}</li>`).join('')}
                                            </ul>
                                        </div>
                                    ` : ''}
                                    
                                    ${evaluation.improvements && evaluation.improvements.length > 0 ? `
                                        <div class="mb-2">
                                            <strong class="text-warning">Areas for Improvement:</strong>
                                            <ul class="mb-0">
                                                ${evaluation.improvements.map(improvement => `<li>${improvement}</li>`).join('')}
                                            </ul>
                                        </div>
                                    ` : ''}
                                </div>
                            </div>
                        `;
                    });
                    resultHtml += '</div>';
                }
                
                // Add study recommendations
                if (gradingResults.study_recommendations && gradingResults.study_recommendations.length > 0) {
                    resultHtml += `
                        <div class="card mt-3">
                            <div class="card-header bg-info text-white">
                                <h6 class="mb-0"><i class="fas fa-book me-2"></i>Study Recommendations</h6>
                            </div>
                            <div class="card-body">
                                <ul class="mb-0">
                                    ${gradingResults.study_recommendations.map(rec => `<li>${rec}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }
                
                quizContent.innerHTML = resultHtml;
            }
            
            function displayBasicResults(questions, answers) {
                // Fallback to original basic grading logic
                let correct = 0;
                questions.forEach((question, index) => {
                    if (question.question_type === 'open_ended') {
                        if (answers[index] && answers[index].length > 10) {
                            correct++;
                        }
                    } else {
                        if (answers[index] === question.correct_answer) {
                            correct++;
                        }
                    }
                });
                
                const score = Math.round((correct / questions.length) * 100);
                
                let resultHtml = `
                    <div class="text-center mb-4">
                        <div class="alert alert-${score >= 70 ? 'success' : 'info'}">
                            <h4><i class="fas fa-${score >= 70 ? 'check-circle' : 'info-circle'} me-2"></i>
                            Quiz Complete!</h4>
                            <h2>${score}%</h2>
                            <p>You completed ${questions.length} questions.</p>
                            <small class="text-muted">Basic grading used (AI grading temporarily unavailable)</small>
                        </div>
                    </div>
                `;
                
                resultHtml += '<div class="explanations">';
                questions.forEach((question, index) => {
                    const questionText = question.question_text || question.question;
                    const userAnswer = answers[index];
                    const correctAnswer = question.correct_answer;
                    const explanation = question.explanation || 'No explanation provided.';
                    
                    resultHtml += `
                        <div class="card mb-3">
                            <div class="card-body">
                                <h6><strong>Question ${index + 1}:</strong> ${questionText}</h6>
                                <p><strong>Your Answer:</strong> ${userAnswer}</p>
                                <p><strong>Correct Answer:</strong> ${correctAnswer}</p>
                                <p><strong>Explanation:</strong> ${explanation}</p>
                            </div>
                        </div>
                    `;
                });
                resultHtml += '</div>';
                
                const quizContent = document.getElementById('quizContent');
                quizContent.innerHTML = resultHtml;
            }
        });
    </script>
</body>
</html> 